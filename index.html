<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ì‚¬ì£¼ ìƒë‹´ ì‹ ì²­ â€” EVE ì‚¬ì£¼ ë¶„ì„</title>

<style>
  body { font-family: sans-serif; background:#fafafa; padding:20px; }
  h1 { text-align:center; color:#065f46; }
  .section { background:#fff; padding:20px; border-radius:14px; border:1px solid #e5e7eb; margin-bottom:20px; }
  label { font-weight:600; display:block; margin-bottom:6px; }
  input, select, textarea {
    width:100%; padding:10px; border:1px solid #d1d5db;
    border-radius:8px; margin-bottom:15px;
  }
  button {
    padding:12px 20px; border:none; border-radius:10px;
    font-size:16px; cursor:pointer; font-weight:700;
  }
  button[disabled]{ opacity:.6; cursor:not-allowed; }
  .primary { background:#10b981; color:white; }
  .secondary { background:#e5e7eb; }
  .row { display:flex; gap:12px; flex-wrap:wrap; }
  .half { flex:1; min-width:150px; }
  .muted { font-size:13px;color:#6b7280;margin-top:8px; }
  .hidden { display:none; }
</style>
</head>

<body>

<h1>ì‚¬ì£¼ ìƒë‹´ ì‹ ì²­</h1>

<form id="consult-form"
      action="https://formspree.io/f/xzznkvag"
      method="POST">

  <input type="hidden" name="_subject" value="EVE ì‚¬ì£¼ ìƒë‹´ ì‹ ì²­ ì ‘ìˆ˜" />
  <input type="text" name="_gotcha" style="display:none" />

  <!-- 1. ê¸°ë³¸ ì •ë³´ -->
  <div class="section">
    <h2>1. ê¸°ë³¸ ì •ë³´</h2>

    <label>ì„±ëª…</label>
    <input type="text" name="name" required>

    <label>ì´ë©”ì¼</label>
    <input type="email" name="email" required>

    <div class="row">
      <div class="half">
        <label>ìƒë…„ì›”ì¼</label>
        <input type="date" name="birth_date" required>
      </div>
      <div class="half">
        <label>ì¶œìƒì‹œê°„</label>
        <select name="birth_time" id="birth_time">
          <option value="">ëª¨ë¦„</option>
          <option value="23-01">ì(23~01)</option>
          <option value="01-03">ì¶•(01~03)</option>
          <option value="03-05">ì¸(03~05)</option>
          <option value="05-07">ë¬˜(05~07)</option>
          <option value="07-09">ì§„(07~09)</option>
          <option value="09-11">ì‚¬(09~11)</option>
          <option value="11-13">ì˜¤(11~13)</option>
          <option value="13-15">ë¯¸(13~15)</option>
          <option value="15-17">ì‹ (15~17)</option>
          <option value="17-19">ìœ (17~19)</option>
          <option value="19-21">ìˆ (19~21)</option>
          <option value="21-23">í•´(21~23)</option>
        </select>
      </div>
    </div>
  </div>

  <!-- 2. ì‹œì£¼ ì¶”ì • -->
  <div class="section" id="guess-section">
    <h2>2. ì‹œì£¼ ë¯¸ìƒ â€” ì„±í–¥ ê¸°ë°˜ ì¶”ì •</h2>

    <label><b>1ì°¨ ì§ˆë¬¸</b></label>
    <select id="test_q1" name="test_q1">
      <option value="">ì„ íƒ</option>
      <option value="ì">ë¶„ì„Â·ì§‘ìš”</option>
      <option value="ë¬˜">ê´€ê³„Â·ì¡°ìœ¨</option>
      <option value="ì˜¤">í‘œí˜„Â·ë¦¬ë”</option>
      <option value="ìœ ">ì™„ì„±Â·ì²´ë©´</option>
    </select>

    <label><b>2ì°¨ ì§ˆë¬¸</b></label>
    <select id="test_q2" name="test_q2">
      <option value="">ì„ íƒ</option>
      <option value="A">ì´ë™Â·ìœ ì—°</option>
      <option value="B">ì¤‘ì¬Â·ê´€ê³„</option>
      <option value="C">ì§ì„ Â·í‘œí˜„</option>
      <option value="D">ì •ë°€Â·ì™„ì„±</option>
    </select>

    <p class="muted">â€» ì°¸ê³  ìë£Œë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
  </div>

  <!-- 3. ìœ ë£Œ ë¦¬í¬íŠ¸ ì˜µì…˜ -->
  <div class="section">
    <h2>3. ë¦¬í¬íŠ¸ ì„ íƒ</h2>

    <label>
      <input type="radio" name="plan" value="FREE" checked> ë¬´ë£Œ ì ‘ìˆ˜
    </label>

    <label>
      <input type="radio" name="plan" value="PAID">
      ìœ ë£Œ ê²°ë¡  ë¦¬í¬íŠ¸ (PDF) â€” $14.99
    </label>

    <div id="paid-box" class="hidden">
      <button type="button" class="primary" id="btnPay" style="background:#111827;">
        Stripe ê²°ì œí•˜ê¸° â†’
      </button>

      <label style="margin-top:10px;">
        <input type="checkbox" id="chkPaidConfirm">
        ê²°ì œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤
      </label>
    </div>

    <input type="hidden" name="paid_confirm" id="paid_confirm" value="NO" />
  </div>

  <!-- 4. ë©”ëª¨ -->
  <div class="section">
    <h2>4. ì¶”ê°€ ë©”ëª¨</h2>
    <textarea name="memo" rows="4"></textarea>
  </div>

  <div style="text-align:center;">
    <button class="primary" id="submitBtn" type="submit">ë¶„ì„ ìš”ì²­</button>
    <button class="secondary" type="reset">ì´ˆê¸°í™”</button>
  </div>
</form>

<script>
  const form = document.getElementById('consult-form');
  const birthTime = document.getElementById('birth_time');
  const guess = document.getElementById('guess-section');
  const submitBtn = document.getElementById('submitBtn');

  const planRadios = document.querySelectorAll('input[name="plan"]');
  const paidBox = document.getElementById('paid-box');
  const chkPaid = document.getElementById('chkPaidConfirm');
  const paidHidden = document.getElementById('paid_confirm');
  const btnPay = document.getElementById('btnPay');

  const PAYMENT_LINK = "https://buy.stripe.com/XXXXXXXX"; // ğŸ”´ êµì²´

  function syncGuess() {
    guess.classList.toggle('hidden', !!birthTime.value);
  }

  function syncPay() {
    const paid = document.querySelector('input[name="plan"]:checked').value === "PAID";
    paidBox.classList.toggle('hidden', !paid);

    if (paid) {
      submitBtn.disabled = !chkPaid.checked;
      submitBtn.textContent = chkPaid.checked ? "ìœ ë£Œ ë¦¬í¬íŠ¸ ìš”ì²­" : "ê²°ì œ í›„ ì „ì†¡ ê°€ëŠ¥";
      paidHidden.value = chkPaid.checked ? "YES" : "NO";
    } else {
      submitBtn.disabled = false;
      submitBtn.textContent = "ë¶„ì„ ìš”ì²­";
      paidHidden.value = "NO";
    }
  }

  birthTime.addEventListener('change', syncGuess);
  planRadios.forEach(r => r.addEventListener('change', syncPay));
  chkPaid.addEventListener('change', syncPay);

  btnPay.addEventListener('click', () => {
    window.open(PAYMENT_LINK, "_blank");
  });

  form.addEventListener('submit', e => {
    if (paidHidden.value === "NO" && document.querySelector('input[name="plan"]:checked').value === "PAID") {
      e.preventDefault();
      alert("ê²°ì œ í›„ ì²´í¬í•´ì£¼ì„¸ìš”.");
    }
  });

  syncGuess();
  syncPay();
</script>

</body>
</html>

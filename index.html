<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>사주 상담 신청 — EVE 사주 분석</title>
<style>
  body { font-family: sans-serif; background:#fafafa; padding:20px; }
  h1 { text-align:center; color:#065f46; }
  .section { background:#fff; padding:20px; border-radius:14px; border:1px solid #e5e7eb; margin-bottom:20px; }
  label { font-weight:600; display:block; margin-bottom:6px; }
  input, select, textarea {
    width:100%; padding:10px; border:1px solid #d1d5db;
    border-radius:8px; margin-bottom:15px;
  }
  button {
    padding:12px 20px; border:none; border-radius:10px;
    font-size:16px; cursor:pointer; font-weight:700;
  }
  button[disabled]{ opacity:.6; cursor:not-allowed; }
  .primary { background:#10b981; color:white; }
  .secondary { background:#e5e7eb; }
  .row { display:flex; gap:12px; flex-wrap:wrap; }
  .half { flex:1; min-width:150px; }
  .muted { font-size:13px;color:#6b7280;margin-top:6px; }
  .hidden { display:none; }
</style>
</head>
<body>

<h1>사주 상담 신청</h1>

<form id="consult-form"
      action="https://formspree.io/f/xzznkvag"
      method="POST">

  <!-- Formspree 옵션 -->
  <input type="hidden" name="_subject" value="EVE 사주 상담 신청 접수" />

  <!-- 스팸봇 차단용 허니팟 -->
  <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />

  <div class="section">
    <h2>1. 기본 정보</h2>

    <label>성명</label>
    <input type="text" name="name" required>

    <label>이메일</label>
    <input type="email" name="_replyto" required>

    <div class="row">
      <div class="half">
        <label>생년월일</label>
        <input
          type="date"
          name="birth_date"
          id="birth_date"
          required
          autocomplete="bday"
        >
        <div class="muted">예: 12/31/1990</div>
      </div>

      <div class="half">
        <label>출생시간</label>
        <select name="birth_time" id="birth_time">
          <option value="">모름</option>
          <option value="23-01">자(23~01)</option>
          <option value="01-03">축(01~03)</option>
          <option value="03-05">인(03~05)</option>
          <option value="05-07">묘(05~07)</option>
          <option value="07-09">진(07~09)</option>
          <option value="09-11">사(09~11)</option>
          <option value="11-13">오(11~13)</option>
          <option value="13-15">미(13~15)</option>
          <option value="15-17">신(15~17)</option>
          <option value="17-19">유(17~19)</option>
          <option value="19-21">술(19~21)</option>
          <option value="21-23">해(21~23)</option>
        </select>
      </div>
    </div>
  </div>

  <div class="section" id="guess-section">
    <h2>2. 시주 미상일 경우 — 시주 추정 테스트</h2>

    <label><b>1차 질문 — 전반적인 기질</b></label>
    <select id="test_q1" name="test_q1">
      <option value="">※ 가장 가까운 하나를 선택하세요</option>
      <option value="Q1-자형">① 분석·계산이 빠르고 밤형, 한 번 파면 끝까지 간다</option>
      <option value="Q1-묘형">② 관계·조율 중심, 말이 부드럽고 중재 역할</option>
      <option value="Q1-오형">③ 에너지·표현형, 리드·노출을 두려워하지 않음</option>
      <option value="Q1-유형">④ 디테일·완성도·체면 중시</option>
    </select>

    <label><b>2차 질문 — 인간관계/대응</b></label>
    <select id="test_q2" name="test_q2">
      <option value="">※ 가장 가까운 문장 선택</option>
      <option value="A">A. 이동·변화 선호</option>
      <option value="B">B. 관계·조율 우선</option>
      <option value="C">C. 직선·표현형</option>
      <option value="D">D. 체면·완성도 중시</option>
    </select>

    <p class="muted">
      ※ 시주 추정 참고 자료이며, 실제 해석은 전체 팔자 기준으로 진행됩니다.
    </p>
  </div>

  <div class="section">
    <h2>3. 추가 메모</h2>
    <textarea name="memo" rows="4"
      placeholder="상담자에게 전하고 싶은 내용을 자유롭게 적어주세요."></textarea>
  </div>

  <div style="text-align:center; margin-top:20px;">
    <button class="primary" id="submitBtn" type="submit">분석 요청</button>
    <button class="secondary" type="reset">초기화</button>
  </div>
</form>

<script>
  const form = document.getElementById('consult-form');
  const birthTimeEl = document.getElementById('birth_time');
  const guessSection = document.getElementById('guess-section');
  const q1 = document.getElementById('test_q1');
  const q2 = document.getElementById('test_q2');
  const submitBtn = document.getElementById('submitBtn');

  function syncGuessUI() {
    if (!birthTimeEl.value) {
      guessSection.classList.remove('hidden');
      q1.required = true;
      q2.required = true;
    } else {
      guessSection.classList.add('hidden');
      q1.required = false;
      q2.required = false;
      q1.value = "";
      q2.value = "";
    }
  }

  syncGuessUI();
  birthTimeEl.addEventListener('change', syncGuessUI);

  // 모바일에서 생년월일 → 텍스트 입력
  const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  const birthDate = document.getElementById('birth_date');

  if (isMobile) {
    birthDate.type = "text";
    birthDate.placeholder = "MM/DD/YYYY";
    birthDate.inputMode = "numeric";
    birthDate.pattern = "^(0[1-9]|1[0-2])\\/(0[1-9]|[12][0-9]|3[01])\\/\\d{4}$";
  }

  // 중복 제출 방지
  form.addEventListener('submit', function () {
    submitBtn.disabled = true;
    submitBtn.textContent = "전송 중...";
  });

  form.addEventListener('reset', function () {
    setTimeout(() => {
      submitBtn.disabled = false;
      submitBtn.textContent = "분석 요청";
      syncGuessUI();
    }, 0);
  });
</script>

</body>
</html>
